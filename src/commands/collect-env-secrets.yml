description: >
  This command will contact secret manager and save the output locally as .env file.

parameters:
  app-name:
    type: string
    default: '${AWS_RESOURCE_NAME_PREFIX}'
    description: the secret name (resource-name by default)
  node-env:
    type: env_var_name
    default: NODE_ENV

steps:
  - run:
      environment:
        NODE_ENV: << parameters.node-env >>
        APP_NAME: << parameters.app-name >>
      name: Retrieving environment secrets file
      command: << include(scripts/get-secret-value.sh) >>
